# Структура базы данных дневника трейдера

## Обзор

Создана нормализованная реляционная структура базы данных для интерактивного дневника трейдера с поддержкой:
- Ручного ввода сделок
- Анализа торговой деятельности
- Стратегий торговли
- Инструментов российского рынка
- Будущей интеграции с внешними API

## Приложения Django

### 1. accounts (Профили трейдеров)
- **TraderProfile** - расширение пользователя с данными о депозите

### 2. strategies (Торговые стратегии)
- **TradingStrategy** - стратегии торговли пользователей

### 3. instruments (Торговые инструменты)
- **Instrument** - справочник инструментов российского рынка

### 4. trades (Сделки и анализ)
- **Trade** - основная таблица торговых сделок
- **TradeAnalysis** - анализ сделок
- **TradeScreenshot** - скриншоты сделок
- **MarketContext** - контекст рынка (для будущих API)

## Схема связей

```
User (Django Auth)
├── OneToOne → TraderProfile
├── ForeignKey → TradingStrategy (много стратегий)
└── ForeignKey → Trade (много сделок)

Instrument
└── ForeignKey → Trade (много сделок на инструмент)

TradingStrategy
└── ForeignKey → Trade (много сделок по стратегии)

Trade
├── OneToOne → TradeAnalysis
├── OneToOne → MarketContext
└── ForeignKey → TradeScreenshot (много скриншотов)
```

## Ключевые особенности

### Безопасность
- UUID для Trade вместо последовательных ID
- Связь сделок с пользователями для изоляции данных

### Гибкость
- JSONField для тегов и будущих market_data
- Опциональные поля (депозит, скриншоты, контекст рынка)
- Поддержка как акций, так и фьючерсов

### Расширяемость
- Модель MarketContext готова для интеграции с API
- Модульная структура приложений
- Возможность добавления новых типов инструментов

### Django-way
- Использование TextChoices для констант
- Proper Meta классы с verbose_name
- Правильные related_name для связей

## Базовые данные

Добавлены базовые инструменты российского рынка:
- **Акции**: SBER, GAZP, LKOH, NVTK, MGNT
- **Фьючерсы**: Si-12.24 (USD/RUB), RTS-12.24 (индекс РТС)

## Доступ к админ-панели

- URL: http://localhost:8000/admin/
- Логин: admin
- Пароль: admin123

## Статус

✅ Все миграции применены  
✅ Базовые данные загружены  
✅ Админ-панели настроены  
✅ Система проверена на ошибки  

Готово к разработке фронтенда и API!
