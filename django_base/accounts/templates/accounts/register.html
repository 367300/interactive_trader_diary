{% extends 'core/base.html' %}
{% load static %}

{% block title %}Регистрация - Дневник трейдера{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
        <div class="card border-0 shadow-soft">
            <div class="card-body p-4">
                <div class="text-center mb-4">
                    <i class="bi bi-person-plus text-success fs-1 mb-3"></i>
                    <h3 class="card-title">Регистрация</h3>
                    <p class="text-muted">Создайте аккаунт для начала работы</p>
                </div>
                
                <form method="post" class="needs-validation" novalidate>
                    {% csrf_token %}
                    
                    <div class="form-floating mb-3">
                        <input type="text" 
                               class="form-control" 
                               id="username" 
                               name="username" 
                               placeholder="Имя пользователя"
                               required>
                        <label for="username">Имя пользователя</label>
                        <div class="form-text">Может содержать буквы, цифры и символы @/./+/-/_</div>
                    </div>
                    
                    <div class="form-floating mb-3">
                        <input type="email" 
                               class="form-control" 
                               id="email" 
                               name="email" 
                               placeholder="Email"
                               required>
                        <label for="email">Email</label>
                    </div>
                    
                    <div class="form-floating mb-3">
                        <input type="password" 
                               class="form-control" 
                               id="password1" 
                               name="password1" 
                               placeholder="Пароль"
                               required>
                        <label for="password1">Пароль</label>
                        <div class="form-text">Минимум 8 символов</div>
                    </div>
                    
                    <div class="form-floating mb-3">
                        <input type="password" 
                               class="form-control" 
                               id="password2" 
                               name="password2" 
                               placeholder="Подтверждение пароля"
                               required>
                        <label for="password2">Подтверждение пароля</label>
                    </div>
                    
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="agree" required>
                        <label class="form-check-label" for="agree">
                            Я согласен с 
                            <a href="#" class="text-decoration-none">условиями использования</a>
                        </label>
                    </div>
                    
                    <div class="d-grid">
                        <button class="btn btn-success btn-lg" type="submit">
                            <i class="bi bi-person-plus me-2"></i>Создать аккаунт
                        </button>
                    </div>
                </form>
                
                <div class="text-center mt-4">
                    <p class="text-muted">
                        Уже есть аккаунт? 
                        <a href="{% url 'accounts:login' %}" class="text-decoration-none">
                            Войти
                        </a>
                    </p>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-4">
            <a href="{% url 'core:index' %}" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left me-2"></i>Вернуться на главную
            </a>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.card {
    border-radius: 12px;
}

.form-floating > label {
    padding: 1rem 0.75rem;
}

.btn {
    border-radius: 8px;
    font-weight: 500;
}

.form-text {
    font-size: 0.875rem;
}
</style>
{% endblock %}

{% block extra_js %}
<script>
// Валидация паролей
document.getElementById('password2').addEventListener('input', function() {
    const password1 = document.getElementById('password1').value;
    const password2 = this.value;
    
    if (password1 !== password2) {
        this.setCustomValidity('Пароли не совпадают');
    } else {
        this.setCustomValidity('');
    }
});

// Валидация длины пароля
document.getElementById('password1').addEventListener('input', function() {
    const password = this.value;
    
    if (password.length > 0 && password.length < 8) {
        this.setCustomValidity('Пароль должен содержать минимум 8 символов');
    } else {
        this.setCustomValidity('');
    }
});
</script>
{% endblock %}
